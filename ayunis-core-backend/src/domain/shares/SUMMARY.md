Resource Sharing
Share agents, prompts, and knowledge bases across organizations and teams

Shares enable users to publish owned resources (agents, prompts, knowledge bases) to scoped audiences within their organization or team, allowing colleagues to discover and use shared AI configurations.

The shares module implements a generic sharing system for platform resources. The abstract `Share` entity specializes into `AgentShare` and other entity-specific types, each linked to a `ShareScope` (organization or team level). Key use cases include creating shares with scope validation, deleting shares, finding shares by entity or scope, and listing all shares for a user. The `ShareAuthorizationFactory` delegates ownership verification to entity-specific strategies (e.g., `AgentShareAuthorizationStrategy`), ensuring users can only share resources they own. When a share is deleted, the `DeleteShareUseCase` queries remaining shares for the same entity and emits a `ShareDeletedEvent` enriched with `orgId` (from the request context) and `remainingScopes` â€” the scope type and scope ID of each surviving share. This allows consumers (e.g., the skills module) to reconcile access precisely rather than revoking all non-owner access. The `ShareScopeResolverService` is exported for cross-module consumption (skills, threads); it resolves remaining share scopes to user IDs during share revocation cleanup by delegating to `FindAllUserIdsByOrgIdUseCase` and `FindAllUserIdsByTeamIdUseCase` from the IAM modules. The module integrates with **agents** which registers its authorization strategy and whose entities can be shared, **prompts** for prompt sharing, **knowledge bases** for knowledge base sharing, **skills** for skill sharing, and the **IAM** bounded context for organization membership and role verification during scope validation.
